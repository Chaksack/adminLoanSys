{"ast":null,"code":"import axios from \"axios\"; // const apiClient = axios.create({\n//   baseURL: \"http://sandbox.pavelon.com\",\n//   withCredentials: true,\n//   headers: {\n//     Accept: \"\",\n//     \"Content-type\": \"\",\n//   },\n// });\n// export default {\n//   postLogin() {\n//     return apiClient.post(\"login\");\n//   },\n//   getUsers() {\n//     return apiClient.get(\"users\");\n//   },\n//   postUsers() {\n//     return apiClient.post(\"users\");\n//   },\n// };\n\naxios.defaults.baseURL = \"http://sandbox.pavelon.com/api/\";\nlet refresh = false;\naxios.interceptors.response.use(resp => resp, async error => {\n  if (error.response.status === 401 && !refresh) {\n    refresh = true; // eslint-disable-next-line no-unused-vars\n\n    const {\n      status,\n      data\n    } = await axios.post(\"refresh\", {}, {\n      withCredentials: true\n    });\n\n    if (status === 200) {\n      axios.defaults.headers.common[\"Authorization\"] = \"Bearer ${data.token)\";\n      return axios(error.config);\n    }\n  }\n\n  refresh = false;\n  return error;\n});","map":{"version":3,"names":["axios","defaults","baseURL","refresh","interceptors","response","use","resp","error","status","data","post","withCredentials","headers","common","config"],"sources":["/Users/mr.k8/Documents/GitHub/loanSys/src/APIs/axios.js"],"sourcesContent":["import axios from \"axios\";\n\n// const apiClient = axios.create({\n//   baseURL: \"http://sandbox.pavelon.com\",\n//   withCredentials: true,\n//   headers: {\n//     Accept: \"\",\n//     \"Content-type\": \"\",\n//   },\n// });\n\n// export default {\n//   postLogin() {\n//     return apiClient.post(\"login\");\n//   },\n//   getUsers() {\n//     return apiClient.get(\"users\");\n//   },\n//   postUsers() {\n//     return apiClient.post(\"users\");\n//   },\n// };\n\naxios.defaults.baseURL = \"http://sandbox.pavelon.com/api/\";\nlet refresh = false;\n\naxios.interceptors.response.use(\n  (resp) => resp,\n  async (error) => {\n    if (error.response.status === 401 && !refresh) {\n      refresh = true;\n      // eslint-disable-next-line no-unused-vars\n      const { status, data } = await axios.post(\n        \"refresh\",\n        {},\n        {\n          withCredentials: true,\n        }\n      );\n      if (status === 200) {\n        axios.defaults.headers.common[\"Authorization\"] = \"Bearer ${data.token)\";\n        return axios(error.config);\n      }\n    }\n    refresh = false;\n    return error;\n  }\n);\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,KAAK,CAACC,QAAN,CAAeC,OAAf,GAAyB,iCAAzB;AACA,IAAIC,OAAO,GAAG,KAAd;AAEAH,KAAK,CAACI,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CACGC,IAAD,IAAUA,IADZ,EAEE,MAAOC,KAAP,IAAiB;EACf,IAAIA,KAAK,CAACH,QAAN,CAAeI,MAAf,KAA0B,GAA1B,IAAiC,CAACN,OAAtC,EAA+C;IAC7CA,OAAO,GAAG,IAAV,CAD6C,CAE7C;;IACA,MAAM;MAAEM,MAAF;MAAUC;IAAV,IAAmB,MAAMV,KAAK,CAACW,IAAN,CAC7B,SAD6B,EAE7B,EAF6B,EAG7B;MACEC,eAAe,EAAE;IADnB,CAH6B,CAA/B;;IAOA,IAAIH,MAAM,KAAK,GAAf,EAAoB;MAClBT,KAAK,CAACC,QAAN,CAAeY,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,sBAAjD;MACA,OAAOd,KAAK,CAACQ,KAAK,CAACO,MAAP,CAAZ;IACD;EACF;;EACDZ,OAAO,GAAG,KAAV;EACA,OAAOK,KAAP;AACD,CApBH"},"metadata":{},"sourceType":"module"}